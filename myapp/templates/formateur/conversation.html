{% extends 'base.html' %}
{% block content %}
<div class="container">
    <h2>Conversation avec {{ apprenant.get_full_name|default:apprenant.username }}</h2>
    <div class="messages" style="max-height:400px;overflow-y:auto;border:1px solid #eee;padding:1em;margin-bottom:1em;">
        {% for message in messages %}
            <div style="margin-bottom:0.5em;">
                <strong>{% if message.sender == request.user %}Moi{% else %}{{ message.sender.get_full_name|default:message.sender.username }}{% endif %} :</strong>
                <span>{{ message.content }}</span>
                <span style="color:#888;font-size:0.8em;">({{ message.timestamp|date:'d/m/Y H:i' }})</span>
            </div>
        {% empty %}
            <div>Aucun message pour le moment.</div>
        {% endfor %}
    </div>
    <form method="post">
        {% csrf_token %}
        <textarea name="content" rows="2" style="width:100%;" placeholder="Votre message..."></textarea>
        <button type="submit" style="margin-top:0.5em;">Envoyer</button>
    </form>
    <a href="{% url 'messagerie_formateur' %}" style="display:inline-block;margin-top:1em;">&larr; Retour Ã  la messagerie</a>
</div>
{% endblock %} 